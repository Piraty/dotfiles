#!/usr/bin/env python3

import urllib.request
import json
import ipaddress

# fetch json
data=[]
with urllib.request.urlopen("https://api.github.com/meta") as url:
    data = json.loads(url.read().decode())

# parse IP addresses (all fields)
res=[]
for curField in data:
    if isinstance(data[curField], list):
        for item in data[curField]:
            # is it a valid IP?
            try:
                ipaddress.ip_network(item)
            except ValueError:
                continue
            res.append(item)

# print results, one per line
for item in res:
    print(item)
